<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="editor.css">
    <script src="prism.js"></script>
    <script src="editor.js"></script>

<script src="https://cdn.jsdelivr.net/npm/prismjs@1.26.0/plugins/autoloader/prism-autoloader.min.js"></script>

</head>

<body>  
<a href="https://github.com/hexo-team/html-editor/blame/main/public/index.html"><img src="https://img.shields.io/badge/History-index.html-lightgrey?logo=github" alt="index.html history"></a>
<a href="https://gitpod.io/#https://github.com/hexo-team/html-editor"><img src="https://img.shields.io/badge/GitPod-open-orange?logo=gitpod" alt="GitPod"></a>
<hr>
<a href="javascript:void(0)" id="link">open in new tab</a>
<button type="button" id="restore">restore Editor</button>
<button type="button" id="save">save</button>
 
<div style="" id="view">
  <iframe style="width:95vw;height:50vh;" id="currentSite"></iframe>
</div>

<pre><code style="width:95vw;height:48vh;" oninput="codeupdate()" id="input" class="language-js editable">


</code></pre>


<script>
function codeupdate() { 
  
  URL.revokeObjectURL(link.href);
  
  // create a new div element
  const newView = document.createElement("div");
  newView.id = "view"


  // and give it some content
  const iframe = document.createElement("iframe");
  var input = document.getElementById("input");
  let writtencode = new Blob([ input.value ], {type: 'text/html'});
  var iframeurl = URL.createObjectURL(writtencode);
  link.href = iframeurl
  iframe.src = iframeurl
  iframe.id = "currentSite"
  iframe.style = "width:95vw;height:50vh;"
  
  // add the text node to the newly created div
  newView.appendChild(iframe);

  // add the newly created element and its content into the DOM
  const currentView = document.getElementById("view");
  document.body.replaceChild(newView, currentView);

}

  function clear() {
    var check = confirm('code wiedererstellen?'); 
	if (check == true) {
		location.reload();
	}
  }
</script>

<script src="./src/save-restore.js">
</script>

</body>
</html>
