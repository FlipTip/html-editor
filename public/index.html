
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 

<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
  window.OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "f3b90e7c-5fec-44e1-9c15-b81a0e9b5e0a",
    });
  });
</script>

</head>

<body>
<p>Somewhere in the page...</p>

<textarea oninput="codeupdate()" id="input" placeholder="write cour code here"></textarea>

<div id="view">
</div>

<a href="javascript:void(0)" id="link">open in new tab</a>

<script>
function codeupdate() { 
  
  URL.revokeObjectURL(link.href);
  
  // create a new div element
  const newView = document.createElement("div");
  newView.id = "view"

  // and give it some content
  const iframe = document.createElement("iframe");
  var input = document.getElementById("input");
  let writtencode = new Blob([ input.value ], {type: 'text/html'});
  var iframeurl = URL.createObjectURL(writtencode);
  link.href = iframeurl
  iframe.src = iframeurl
  iframe.id = "currentSite"
  
  // add the text node to the newly created div
  newView.appendChild(iframe);

  // add the newly created element and its content into the DOM
  const currentView = document.getElementById("view");
  document.body.replaceChild(newView, currentView);

}
</script>
</body>
</html>
