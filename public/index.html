<p>Somewhere in the page...</p>

<textarea oninput="codeupdate()" id="input" placeholder="write cour code here"></textarea>

<div id="view">
</div>

<a onclick="iframeupdate()" href="javascript:void(0)" id="link">open in new tab</a>

<script>
function codeupdate() { 
  
  URL.revokeObjectURL(link.href);
  
  // create a new div element
  const newDiv = document.createElement("div");
  newDiv.id = "view"

  // and give it some content
  const iframe = document.createElement("iframe");
  var input = document.getElementById("input");
  let writtencode = new Blob([ input.value ], {type: 'text/html'});
  var iframeurl = URL.createObjectURL(writtencode);
  link.href = iframeurl
  iframe.src = iframeurl
  
  // add the text node to the newly created div
  newDiv.appendChild(iframe);

  // add the newly created element and its content into the DOM
  const currentDiv = document.getElementById("view");
  document.body.replaceChild(newDiv, currentDiv);

}
</script>
